# 요구사항

## 기능적 요구사항

- 잔액 충전 API
  - 사용자 식별자를 통해 해당 사용자의 잔액을 충전합니다.
  - 유저가 존재하지 않거나, 탈퇴한 유저인 경우에는 기능에 실패합니다.
  - 잘못된 금액이 들어올 경우 실패합니다.
  - 1회 최대 충전 금액은 500만원, 최대 잔고 금액은 10억 입니다.
- 잔액 조회 API
  - 사용자 식별자를 통해 해당 사용자의 잔액을 조회합니다.
  - 유저가 존재하지 않거나, 탈퇴한 유저인 경우에는 기능에 실패합니다.
- 상품 조회 API
  - 상품의 정보 (id, 이름, 가격, 잔여수량) 을 조회합니다.
  - 유저가 존재하지 않거나, 탈퇴한 유저인 경우에는 기능에 실패합니다.
- 주문/결제 API
  - 사용자는 식별자(상품 id, 수량) 목록을 입력받아 주문하고 결제를 수행하는 API 를 제작합니다.
  - 유저가 존재하지 않거나, 탈퇴한 유저인 경우에는 기능에 실패합니다.
  - 상품이 존재하지 않거나, 재고가 부족한 경우에는 기능에 실패합니다.
  - 결제는 충전된 금액을 사용하고, 성공할 시 잔액 차감이 필요합니다. 잔액이 부족할 경우 기능에 실패합니다.
  - 쿠폰을 사용할 때 유효하지 않은 쿠폰 사용 시도에는 주문이 실패합니다.
  - 쿠폰을 사용할 때 상품 금액보다 쿠폰의 할인 금액이 많다면, 0원으로 결제가 진행됩니다.
  - 데이터 분석을 위해 결제 성공 시 실시간으로 주문 정보를 데이터 플랫폼에 전송합니다. (데이터 플랫폼이 어플리케이션 외부에 위치한다고 가정합니다.)
- 선착순 쿠폰 발급 API
  - 선착순 쿠폰을 발급받습니다.
  - 주문 시 유효한 할인 쿠폰이 존재한다면, 전체 주문금액에 대하여 할인 혜택을 부여받을 수 있습니다.
  - 쿠폰은 만료 기한이 존재합니다.
  - 쿠폰은 절대적인 할인 급액을 기준으로 할인이 진행됩니다.
  - 쿠폰은 한번 사용하면 다시 사용할 수 없습니다.
- 선착순 쿠폰 조회 API
  - 쿠폰을 조회할 수 있습니다. 
- 인기 판매 상품 조회 API
  - 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 제공하는 API 를 작성합니다.

## 비기능적 정책
- 주문
  - 동시에 여러개의 주문이 들어와도 재고의 정합성이 정상적으로 이루어져야 합니다.
- 쿠폰
  - 선착순 쿠폰은 선착순으로 유저에게 지급이 완료되어야 합니다.
